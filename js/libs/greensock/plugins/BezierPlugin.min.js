/*!
 * VERSION: beta 1.01
 * DATE: 2012-07-16
 * JavaScript (also available in AS3 and AS2)
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * Copyright (c) 2008-2012, GreenSock. All rights reserved. 
 * This work is subject to the terms in http://www.greensock.com/terms_of_use.html or for 
 * corporate Club GreenSock members, the software agreement that was issued with the corporate 
 * membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
(window._gsQueue||(window._gsQueue=[])).push(function(){_gsDefine("plugins.BezierPlugin",["plugins.TweenPlugin"],function(B){var x=function(){B.call(this,"bezier",-1);this._overwriteProps.pop();this._func={};this._round={}},y=x.prototype=new B("bezier",1),F=180/Math.PI,z=[],A=[],C=[],D,G=x.bezierThrough=function(a,c,g,m,o,b){var d={},f=[],j,e,m="string"===typeof m?","+m+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,"; null==c&&(c=1);for(e in a[0])f.push(e);z.length=A.length=C.length=0;j=f.length;for(D=0;-1<--j;){e=f[j];var n=d,i=e,v=a,q=e;e=-1!==m.indexOf(","+e+",");var s=o,r=[],p=void 0,h=void 0,k=void 0,u=void 0,t=k=void 0,l=u=void 0;s&&(v=[s].concat(v));p=v.length-2;for(h=0;h<p;h++)if(r[h]=k={},s?(k.a=u="string"===typeof(l=v[h][q])?s[q]+Number(l.split("=").join("")):Number(l),k.d=k="string"===typeof(l=v[h+1][q])?s[q]+Number(l.split("=").join("")):Number(l),t="string"===typeof(l=v[h+2][q])?s[q]+Number(l.split("=").join("")): Number(l)):(k.a=u=v[h][q],k.d=k=v[h+1][q],t=v[h+2][q]),e)u=k>u?k-u:u-k,z[h]=(z[h]||0)+u,A[h]=(A[h]||0)+u+(t>k?t-k:k-t);r[h]=k={a:v[h][q],d:v[h+1][q]};if(s&&("string"===typeof k.a&&(k.a=s[q]+Number(k.a.split("=").join(""))),"string"===typeof k.d))k.d=s[q]+Number(k.d.split("=").join(""));n[i]=r}for(j=f.length;-1<--j;)if(e=f[j],-1!==m.indexOf(","+e+",")){D++;a=d[e];o=a.length-1;i=i=n=void 0;for(n=0;n<o;n++)i=a[n],i=(a[n+1].d-i.d)/(A[n]-z[n])+(i.d-i.a)/z[n],0===i&&(i=0.01),C[n]=(C[n]||0)+(0<i?i:-i)}for(j= f.length;-1<--j;){e=f[j];a=d[e];o=c;n=g;i=-1!==m.indexOf(","+e+",");v=b;q=a.length-1;e=0;for(var s=a[0].a,w=t=p=u=t=k=u=l=k=h=p=r=void 0,x=void 0,y=void 0,r=0;r<q;r++)l=a[e],p=l.a,h=l.d,k=a[e+1].d,i?(t=z[r],w=A[r],y=w/D*o/C[r]):(t=h>p?h-p:p-h,w=t+(k>h?k-h:h-k),y=0.5*w*o),t===w&&(t=0.5,w=1),x=(t/w+2)/5,u=h-(h-p)*y/t*x,k=h+(k-h)*y/(w-t)*(1-x),t=h-(u+(k-u)*(3*t/w+0.5)/4),l.c=u+=t,l.b=0!==r?s:s=l.a+0.6*(l.c-l.a),v&&(l.da=h-p,l.ca=u-p,l.ba=s-p),n?(p=E(p,s,u,h),a.splice(e,1,p[0],p[1],p[2],p[3]),e+=4):e++, s=k+t;l=a[e];l.b=s;l.c=s+0.4*(l.d-s);v&&(l.da=l.d-l.a,l.ca=l.c-l.a,l.ba=s-l.a);n&&(p=E(l.a,s,l.c,l.d),a.splice(e,1,p[0],p[1],p[2],p[3]))}return d},E=x.cubicToQuadratic=function(a,c,g,m){var o={a:a},b={},d={},f={c:m},j=(a+c)/2,e=(c+g)/2,g=(g+m)/2,c=(j+e)/2,e=(e+g)/2,n=(e-c)/8;o.b=j+(a-j)/4;b.b=c+n;o.c=b.a=(o.b+b.b)/2;b.c=d.a=(c+e)/2;d.b=e-n;f.b=g+(m-g)/4;d.c=f.a=(d.b+f.b)/2;return[o,b,d,f]};x.quadraticToCubic=function(a,c,g){return{a:a,b:(2*c+a)/3,c:(2*c+g)/3,d:g}};y.constructor=x;x.API=2;y._onInitTween= function(a,c,g){this._target=a;c instanceof Array&&(c={values:c});this._props=[];this._timeRes=null==c.timeResolution?6:parseInt(c.timeResolution);var m=c.values||[],o={},b=m[0],g=c.autoRotate||g.vars.orientToBezier,d,f;this._autoRotate=g?g instanceof Array?g:[["x","y","rotation",0]]:null;for(d in b)this._props.push(d);for(b=this._props.length;-1<--b;)d=this._props[b],this._overwriteProps.push(d),g=this._func[d]="function"===typeof a[d],o[d]=!g?parseFloat(a[d]):a[d.indexOf("set")||"function"!==typeof a["get"+ d.substr(3)]?d:"get"+d.substr(3)]();if("cubic"!==c.type&&"quadratic"!==c.type&&"soft"!==c.type)o=G(m,isNaN(c.curviness)?1:c.curviness,!1,c.correlate,o,!0);else{var b=(b=c.type)||"soft",c={},g="cubic"===b?3:2,b="soft"===b,j=[],e,n,i,v,q,s,r,p,h;b&&o&&(m=[o].concat(m));if(null==m||3>m.length)throw"invalid Bezier data";for(n in m[0])j.push(n);for(s=j.length;-1<--s;){n=j[s];c[n]=q=[];h=0;p=m.length;for(r=0;r<p;r++)e=null==o?m[r][n]:"string"===typeof(i=m[r][n])?o[n]+Number(i.split("=").join("")):Number(i), b&&1<r&&r<p-1&&(q[h++]=(e+q[h-2])/2),q[h++]=e;p=h-g+1;for(r=h=0;r<p;r+=g)e=q[r],n=q[r+1],i=q[r+2],v=2===g?0:q[r+3],q[h++]=i=3===g?{a:e,b:n,c:i,d:v}:{a:e,b:(2*n+e)/3,c:(2*n+i)/3,d:i},i.da=i.d-e,i.ca=i.c-e,i.ba=i.b-e;q.length=h}o=c}this._beziers=o;this._segCount=this._beziers[d].length;if(this._timeRes){j=this._beziers;d=this._timeRes;d=d>>0||6;o=[];n=[];m=i=0;c=d-1;g=[];b=[];for(f in j){e=j[f];q=o;s=d;r=1/s;p=e.length;for(var k=void 0,u=void 0,t=v=h=u=void 0,l=k=void 0,w=void 0,w=t=void 0;-1<--p;){t= e[p];u=t.a;h=t.d-u;v=t.c-u;t=t.b-u;u=0;for(l=1;l<=s;l++)k=r*l,w=1-k,k=u-(u=(k*k*h+3*w*(k*v+w*t))*k),w=p*s+l-1,q[w]=(q[w]||0)+k*k}}j=o.length;for(f=0;f<j;f++)i+=Math.sqrt(o[f]),e=f%d,b[e]=i,e===c&&(m+=i,e=f/d>>0,g[e]=b,n[e]=m,i=0,b=[]);this._length=m;this._lengths=n;this._segments=g;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(g=this._autoRotate){g[0]instanceof Array||(this._autoRotate=g= [g]);for(b=g.length;-1<--b;)for(f=0;3>f;f++)d=g[b][f],this._func[d]="function"===typeof a[d]?a[d.indexOf("set")||"function"!==typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1}return!0};y.setRatio=function(a){var c=this._segCount,g=this._func,m=this._target,o,b,d,f,j;if(this._timeRes){o=this._lengths;f=this._curSeg;a*=this._length;b=this._li;if(a>this._l2){for(c-=1;b<c&&(this._l2=o[++b])<=a;);this._l1=o[b-1];this._li=b;this._curSeg=f=this._segments[b];this._s2=f[this._s1=this._si=0]}else if(a<this._l1){for(;0< b&&(this._l2=o[--b])>=a;);this._l1=0===b?0:o[b-1];this._li=b;this._curSeg=this._segments[b];this._s1=f[this._si=f.length-1];this._s2=o[b]}o=b;a-=this._l1;b=this._si;if(a>this._s2){for(c=f.length-1;b<c&&(this._s2=f[++b])<=a;);this._s1=f[b-1];this._si=b}else if(a<this._s1){for(;0<b&&(this._s2=f[--b])>=a;);this._s1=0===b?0:f[b-1];this._si=b}f=(b+(a-this._s1)/(this._s2-this._s1))*this._prec}else o=0>a?0:1<=a?c-1:c*a>>0,f=(a-o*(1/c))*c;c=1-f;for(b=this._props.length;-1<--b;)if(a=this._props[b],d=this._beziers[a][o], j=(f*f*d.da+3*c*(f*d.ca+c*d.ba))*f+d.a,this._round[a]&&(j=j+(0<j?0.5:-0.5)>>0),g[a])m[a](j);else m[a]=j;if(this._autoRotate){var c=this._autoRotate,e,n,i,v,q;for(b=c.length;-1<--b;)a=c[b][2],v=c[b][3]||0,q=!0==c[b][4]?1:F,d=this._beziers[c[b][0]][o],j=this._beziers[c[b][1]][o],e=d.a+(d.b-d.a)*f,n=d.b+(d.c-d.b)*f,e+=(n-e)*f,n+=(d.c+(d.d-d.c)*f-n)*f,d=j.a+(j.b-j.a)*f,i=j.b+(j.c-j.b)*f,d+=(i-d)*f,i+=(j.c+(j.d-j.c)*f-i)*f,j=Math.atan2(i-d,n-e)*q+v,g[a]?g[a].call(m,j):m[a]=j}};y._roundProps=function(a, c){for(var g=this._overwriteProps,m=g.length;-1<--m;)if(a[g[m]]||a.bezier||a.bezierThrough)this._round[g[m]]=c};y._kill=function(a){var c=this._props,g,m;for(g in _beziers)if(g in a){delete this._beziers[g];delete this._func[g];for(m=c.length;-1<--m;)c[m]===g&&c.splice(m,1)}return B.prototype._kill.call(this,a)};B.activate([x]);return x},!0)});window._gsDefine&&_gsQueue.pop()();